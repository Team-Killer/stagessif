<app-header></app-header>
<div class="container" style="margin-top: 40px;">
  <div class=" card shadow-lg" >
    <div class="card-header bg-success bg-info">
      <H1>Adminitration et parametrage</H1>
    </div>
    <div class="card-body">
      <div class="well">
        <div class="row">
          <div class="col-sm-8">
            <table class="table  table-condensed table-striped table-bordered table-hover ">
              <thead>
              <tr>
                <td>code</td>
                <td>nom</td>
                <td>abbreviation</td>
                <td>Categorie</td>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>{{parametrage?.centre?.codeBur}}
                <td>{{parametrage?.centre?.nomCF}}
                </td>
                <td>{{parametrage?.centre?.abbrevCF}}
                </td>
                <td>{{parametrage?.centre?.categorie?.nom}}</td>
              </tr>
              </tbody>

            </table>
          </div>
        </div>
        <table class="table  table-condensed table-striped table-bordered table-hover ">
          <thead>
          <tr>
            <td>Centre</td>
            <td>abattement</td>
            <td>taux IS</td>
            <td>action</td>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>{{parametrage?.centre?.codeBur}}
            <td>{{parametrage?.abattement}}
              %</td>
            <td>{{parametrage?.tauxIS}}
              %</td>
            <td>
              <button (click)="changer()"   class="btn btn-warning "><i class="fa fa-edit"></i>Editer</button>
            </td>
          </tr>
          </tbody>

        </table>
        <form *ngIf="!isCliked" class="form-row" #param = "ngForm" (ngSubmit) = "onSubmit(param.value)">
          <div class="col-sm-2 my-1 ">
            <label class="sr-only" for="abbat">Abattement</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">Abattement</div>
              </div>
              <input type="number" class="input-group-sm form-control" id="abbat"
                     required [(ngModel)]="parametrage.abattement" name="abattement">
              <div class="input-group-prepend">
                <div class="input-group-text">%</div>
              </div>
            </div>

          </div>
          <div class="col-sm-2 my-1">
            <label  class="sr-only" for="taux">Taux l'IS</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">Taux l'IS</div>
              </div>
              <input type="number" class="input-group-sm form-control"
                     id="taux" required [(ngModel)]="parametrage.tauxIS" name="tauxIS">
              <div class="input-group-prepend">
                <div class="input-group-text">%</div>
              </div>

            </div>
          </div>
          <div class="col-sm-3 my-1">
            <label class="sr-only"  for="centre">centre fiscal</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <div class="input-group-text">Centre Fiscal</div>
              </div>
              <select  class="form-control" [(ngModel)]="parametrage.centre.codeBur" name="codeBur" id="centre">
                <option *ngFor="let item of centresFiscaux"
                        [value]="item.codeBur"  [selected]="item.codeBur === parametrage.centre.codeBur" >
                  {{item.nomCF}}
                </option>
              </select>
            </div>
          </div>
          <div class="col-auto my-1">
            <button type="submit" class="btn btn-success"><i class=""></i>Effectuer</button>
            <button  style="margin-left: 4px;" (click)="isCliked=true" class="btn btn-danger"><i class=""></i>Annuler</button>
          </div>

        </form>
      </div>
    </div>
  </div>


</div>
